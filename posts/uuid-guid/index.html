<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=fa data-palette=blue><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>کار با UUID در CSharp - وبلاگ آرمان حسن پور</title><link rel=apple-touch-icon href=/images/icons/icon-180x180.png sizes=180x180><link rel=icon href=/images/icons/icon-192x192.png sizes=192x192 type=image/png><link rel=icon href=/images/icons/icon-32x32.png sizes=32x32 type=image/png><link rel=icon href=/images/icons/icon-16x16.png sizes=16x16 type=image/png><link rel=icon href=/images/icons/favicon.ico><link rel=manifest href=/manifest.json><meta name=keywords content><meta name=description content="UUID اختصار عبارت Universally Unique Identifier به معنای شناسه منحصر به فرد جهانی می‌باشد. به‌جای این اصطلاح از GUID که اختصار عبارت Globally Unique Identifier به معنای شناسه منحصر به فرد عمومی نیز استفاده می‌شود. GUID یک اصطلاح صنعتی است که توسط شرکت مایکروسافت برای ارائه یک شماره مرجع که در هر زمینه‌ای منحصر به فرد است، تعریف شده است در حالی که در محیط آکادمیک و در استانداردها از اصطلاح UUID استفاده شده است."><meta name=robots content="index, follow"><meta itemprop=name content="کار با UUID در CSharp"><meta itemprop=description content="UUID اختصار عبارت Universally Unique Identifier به معنای شناسه منحصر به فرد جهانی می‌باشد. به‌جای این اصطلاح از GUID که اختصار عبارت Globally Unique Identifier به معنای شناسه منحصر به فرد عمومی نیز استفاده می‌شود. GUID یک اصطلاح صنعتی است که توسط شرکت مایکروسافت برای ارائه یک شماره مرجع که در هر زمینه‌ای منحصر به فرد است، تعریف شده است در حالی که در محیط آکادمیک و در استانداردها از اصطلاح UUID استفاده شده است."><meta itemprop=datePublished content="2020-02-05T15:42:57+03:30"><meta itemprop=dateModified content="2020-02-05T15:42:57+03:30"><meta itemprop=wordCount content="1510"><meta itemprop=keywords content="UUID,GUID,CSharp,DotNet,"><meta property="og:title" content="کار با UUID در CSharp"><meta property="og:description" content="UUID اختصار عبارت Universally Unique Identifier به معنای شناسه منحصر به فرد جهانی می‌باشد. به‌جای این اصطلاح از GUID که اختصار عبارت Globally Unique Identifier به معنای شناسه منحصر به فرد عمومی نیز استفاده می‌شود. GUID یک اصطلاح صنعتی است که توسط شرکت مایکروسافت برای ارائه یک شماره مرجع که در هر زمینه‌ای منحصر به فرد است، تعریف شده است در حالی که در محیط آکادمیک و در استانداردها از اصطلاح UUID استفاده شده است."><meta property="og:type" content="article"><meta property="og:url" content="/posts/uuid-guid/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-05T15:42:57+03:30"><meta property="article:modified_time" content="2020-02-05T15:42:57+03:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="کار با UUID در CSharp"><meta name=twitter:description content="UUID اختصار عبارت Universally Unique Identifier به معنای شناسه منحصر به فرد جهانی می‌باشد. به‌جای این اصطلاح از GUID که اختصار عبارت Globally Unique Identifier به معنای شناسه منحصر به فرد عمومی نیز استفاده می‌شود. GUID یک اصطلاح صنعتی است که توسط شرکت مایکروسافت برای ارائه یک شماره مرجع که در هر زمینه‌ای منحصر به فرد است، تعریف شده است در حالی که در محیط آکادمیک و در استانداردها از اصطلاح UUID استفاده شده است."><meta property="og:image" content="/false"><meta name=twitter:image content="/false"><link rel=stylesheet href="/assets/main/bundle.min.7f3e941cc9effdd1449e9850609380946e8102cf378f84704a3ae98d0ab3e1e7.css" integrity="sha256-fz6UHMnv/dFEnphQYJOAlG6BAs83j4RwSjrpjQqz4ec=" crossorigin=anonymous><link rel=stylesheet href=/assets/viewer/bundle.min.f05183267bb952fbc8c63a7178364de2951614ab71d544ec1068ad36c7447ccc.css integrity="sha256-8FGDJnu5UvvIxjpxeDZN4pUWFKtx1UTsEGitNsdEfMw=" crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=G-M2V2LN2RH7"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-M2V2LN2RH7")</script></head><body><script>const items=["mode","palette"];items.forEach(function(e){const t=localStorage.getItem("hbs-"+e);t&&document.body.parentElement.setAttribute("data-"+e,t)})</script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top"><div class=container><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-bars"></i>
</button><a class="navbar-brand flex-grow-1 flex-lg-grow-0 text-center text-lg-start mx-auto ms-lg-5" href=/>وبلاگ آرمان حسن پور</a><div class="offcanvas offcanvas-bottom surface" tabindex=-1 id=offcanvasSocialShare aria-labelledby=offcanvasSocialShare><div class=offcanvas-header><h3 class=offcanvas-title>Share</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class=offcanvas-body><a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button" target=_blank href="https://twitter.com/intent/tweet?title=%da%a9%d8%a7%d8%b1%20%d8%a8%d8%a7%20UUID%20%d8%af%d8%b1%20CSharp&url=%2fposts%2fuuid-guid%2f"><i class="fab fa-fw fa-twitter"></i> Twitter</a>
<a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button" target=_blank href="https://www.facebook.com/sharer/sharer.php?u=%2fposts%2fuuid-guid%2f"><i class="fab fa-fw fa-facebook-f"></i> Facebook</a></div></div><div class="collapse navbar-collapse" tabindex=-1 id=navbarSupportedContent aria-labelledby=navbarSupportedContent><form class="search-bar my-1" action=/search><div class="input-group input-group-sm"><span class="btn btn-search disabled position-absolute left-0"><i class="fas fa-fw fa-search"></i></span>
<input class="form-control search-bar-input" name=q type=search aria-label=Search></div></form><ul class="navbar-nav me-auto"><li class=nav-item><a class=nav-link href=/series/><i class="fas fa-fw fa-columns"></i>گروه‌ها</a></li><li class=nav-item><a class=nav-link href=/archives/><i class="fas fa-fw fa-file-archive"></i>بایگانی</a></li><li class=nav-item><a class=nav-link href=/categories/><i class="fas fa-fw fa-folder"></i>دسته‌بندی‌ها</a></li><li class=nav-item><a class=nav-link href=/tags/><i class="fas fa-fw fa-tags"></i>برچسب‌ها</a></li></ul></div></div></nav></header><main class=container><div class="row content"><div class=col-lg-9><div class=container><nav class="row card component" aria-label=breadcrumb><div class=card-body><ol class=breadcrumb><li class=breadcrumb-item><a href=/>خانه</a></li><li class=breadcrumb-item><a href=/posts/>نوشته‌ها</a></li><li class="breadcrumb-item active">کار با UUID در CSharp</li></ol></div></nav><article class="row card component mb-4 post"><div class=card-header><h1 class="card-title post-title">کار با UUID در CSharp</h1></div><div class=card-body><div class=post-meta><span class=post-date title="ایجاد شده در 2020-02-05 12:12:57 +0000 UTC.">فوریهٔ 5, 2020
</span><span class=post-taxonomies><a href=/tags/uuid/ class="badge post-taxonomy">UUID</a><a href=/tags/guid/ class="badge post-taxonomy">GUID</a><a href=/tags/csharp/ class="badge post-taxonomy">CSharp</a><a href=/tags/dotnet/ class="badge post-taxonomy">DotNet</a></span></div><div class="post-content mb-3"><p>UUID اختصار عبارت Universally Unique Identifier به معنای شناسه منحصر به فرد جهانی می‌باشد. به‌جای این اصطلاح از GUID که اختصار عبارت Globally Unique Identifier به معنای شناسه منحصر به فرد عمومی نیز استفاده می‌شود. GUID یک اصطلاح صنعتی است که توسط شرکت مایکروسافت برای ارائه یک شماره مرجع که در هر زمینه‌ای منحصر به فرد است، تعریف شده است در حالی که در محیط آکادمیک و در استانداردها از اصطلاح UUID استفاده شده است. هر دو اصطلاح به یک موضوع اشاره دارند و تفاوتی در استفاده ندارند.<br>UUIDها یک عدد صحیح 128 بیتی هستند که اگر طبق روش‌های استاندارد تولید شوند، بدون آنکه به یک نهاد ثبت‌کننده مرکزی یا هماهنگی با سایر تولیدکننده‌های UUID برای تایید یکتایی نیاز داشته باشند، عملا یکتا خواهند بود. اگرچه احتمال اینکه یک UUID تکراری باشد، صفر نیست، اما آنقدر به صفر نزدیک است که می‌توان از آن چشم‌پوشی نمود.<br>بنابراین هر کسی می‌تواند یک UUID ایجاد کند و از آن برای شناسایی موجودیتی استفاده کند و اطمینان داشته باشد که شناسه‌ای که تولید کرده ‌است با شناسه‌هایی که قبلا تولید شده یا بعدا تولید خواهد شد، تداخلی ندارد. اطلاعاتی که بوسیله UUIDها توسط موجودیت‌های مستقل برچسب‌گذاری شده‌اند می‌توانند بعدا با یکدیگر ادغام شده و در یک پایگاه داده قرار گیرند، بدون آنکه نیاز به از بردن تداخل‌های بین شناسه‌ها شود.<br>UUIDها توسط Open Software Foundation (OSF) که بخشی از Distributed Computing Environment (DCE) است استانداردسازی شده‌اند. UUIDها در سال 1996 به عنوان بخشی از استاندارد ISO/IEC 11578:1996 &ldquo;Information technology – Open Systems Interconnection – Remote Procedure Call (RPC)” و همچنین در سال 2005 نیز در استاندارد ITU-T Rec. X.667 | ISO/IEC 9834-8:2005 مستندسازی شده‌اند. همچنین Internet Engineering Task Force (IETF) با انتشار Standards-Track RFC 4122 که از نظر فنی با استاندارد ITU-T Rec. X.667 | ISO/IEC 9834-8 برابر است مستندات مربوط به UUIDها منتشر کرده است.
در شیوه متعارف نمایش متنی، شانزده بایت یک شناسه GUID توسط 32 رقم هگزادسیمال (مبنای 16) که در 5 گروه که توسط خط فاصله از یکدیگر جدا شده‌اند در قالب 12-4-4-4-8 که در مجموع 36 کاراکتر (32 کاراکتر الفبایی و چهار خط فاصله) را تشکیل می‌دهد، نشان داده می‌شوند.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Text data-lang=Text><span class=line><span class=ln>1</span><span class=cl>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
</span></span></code></pre></div><p>نمونه 1</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Text data-lang=Text><span class=line><span class=ln>1</span><span class=cl>123E4567-E89B-12D3-A456-426614174000
</span></span></code></pre></div><p>نمونه 2</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Text data-lang=Text><span class=line><span class=ln>1</span><span class=cl>B4D0257C-BE19-4800-BA11-A09AC2561898
</span></span></code></pre></div><p>UUIDها دارای سه نوع و پنج نسخه می‌باشند. چهار بیت از رقمی که با M نشان داده شده ‌است، نسخه UUID و رقمی که با N نشان داده شده ‌است، نوع UUID را مشخص می‌کند.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Text data-lang=Text><span class=line><span class=ln>1</span><span class=cl>xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx
</span></span></code></pre></div><p>در نمونه 1، مقدار M برابر یک و مقدار N برابر a است، به این معنی است که نوع UUID از نوع یک، و نسخه آن نیز ۱ می‌باشد.
در نمونه 2، مقدار M برابر 4 و مقدار N برابر b است، به این معنی که نوع UUID از نوع یک و نسخه آن 4 می‌باشد.</p><h2 id=انواع-uuid>انواع UUID<a class="anchor ms-1" href=#انواع-uuid><i class="fas fa-link"></i></a></h2><h3 id=نوع-صفر---n--07>نوع صفر - N = 0..7<a class="anchor ms-1" href=#نوع-صفر---n--07><i class="fas fa-link"></i></a></h3><p>برای سازگاری با سیستم قدیمی قالب UUID 1.5 سامانه محاسبات شبکه‌ایApollo در سال 1988 تعریف شده ‌است. در این قالب، 6 بایت اول زمان با طول 48 بیت است (تعداد واحدهای 4 میلی ثانیه از 1 ژانویه 1980 UTC). دو بایت بعدی رزرو شده است و بایت بعدی نوع آدرس‌دهی در شبکه Apollo است. هفت بایت آخر نیز یک شناسه میزبان 56 بیتی است که با توجه به نوع آدرس‌دهی تعیین می‌شود.</p><h3 id=نوع-یک---n--8b>نوع یک - N = 8..b<a class="anchor ms-1" href=#نوع-یک---n--8b><i class="fas fa-link"></i></a></h3><p>این نوع در استاندارد RFC 4122/DCE 1.1 UUIDs ارجاع داده شده است و نوع رایج UUID می‌باشد.</p><h3 id=نوع-دو---n--cd>نوع دو - N = c..d<a class="anchor ms-1" href=#نوع-دو---n--cd><i class="fas fa-link"></i></a></h3><p>این نوع که با عنوان GUID توسط شرکت مایکروسافت مطرح شده است اولین بار توسط این شرکت در سیستم عامل ویندوز مورد استفاده قرار گرفته است. نوع یک و دو در نمایش رشته‌ای مشابه هم هستند و تنها در بیت مربوط به نوع باهم متفاوت هستند اما در نمایش دودویی در روش نگهداری نیز باهم متفاوت هستند. در نوع یک از ترتیب بایت big-endian استفاده می‌شود در حالی که در نوع دو از ترتیب بایت little-endian استفاده شده است.</p><h3 id=نوع-رزرو-شده---n--ef>نوع رزرو شده - N = e..f<a class="anchor ms-1" href=#نوع-رزرو-شده---n--ef><i class="fas fa-link"></i></a></h3><p>این بازه برای استفاده در آینده رزرو شده است.</p><h2 id=نسخه-های-uuid>نسخه های UUID<a class="anchor ms-1" href=#نسخه-های-uuid><i class="fas fa-link"></i></a></h2><h3 id=نسخه-یک--زمان-و-آدرس-mac>نسخه یک – زمان و آدرس MAC<a class="anchor ms-1" href=#نسخه-یک--زمان-و-آدرس-mac><i class="fas fa-link"></i></a></h3><p>در این نسخه از زمان سیستم و آدرس MAC کارت شبکه که منحصر به فرد برای تولید UUID استفاده می‌شود. با داشتن UUID نسخه 1 با استخراج مقدار timestamp می‌توانید به این موضوع پی ببرید که این UUID چه زمانی تولید شده است. قالب متعارف UUIDهای مبتنی بر زمان به صورت زیر است:</p><table><thead><tr><th style=text-align:left>نام</th><th style=text-align:left>اندازه (بایت)</th><th style=text-align:left>طول (هگزادسیمال)</th><th style=text-align:left>محتوا</th></tr></thead><tbody><tr><td style=text-align:left>time_low</td><td style=text-align:left>4</td><td style=text-align:left>8</td><td style=text-align:left>عدد صحیحی که ۳۲ بیت پایینی زمان است</td></tr><tr><td style=text-align:left>time_mid</td><td style=text-align:left>2</td><td style=text-align:left>4</td><td style=text-align:left>عدد صحیحی که ۱۶ بیت میانی زمان است</td></tr><tr><td style=text-align:left>time_hi_and_version</td><td style=text-align:left>2</td><td style=text-align:left>4</td><td style=text-align:left>۴ بیت پرارزش، نسخه را مشخص کرده و ۱۲ بیت دیگر ۱۲ بیت بالایی زمان است</td></tr><tr><td style=text-align:left>clock_seq_hi_and_res clock_seq_low</td><td style=text-align:left>2</td><td style=text-align:left>4</td><td style=text-align:left>بیت‌های ۱ تا ۳ پرارزش نوع UUID و۱۳ تا ۱۵ بیت باقی مانده توالی ساعت است (clock sequence)</td></tr><tr><td style=text-align:left>node</td><td style=text-align:left>6</td><td style=text-align:left>12</td><td style=text-align:left>شناسه گره ۴۸ بیتی</td></tr></tbody></table><h3 id=نسخه-دو---زمان-و-آدرس-mac-و-نسخه-امنیتی-dce>نسخه دو - زمان و آدرس MAC و نسخه امنیتی DCE<a class="anchor ms-1" href=#نسخه-دو---زمان-و-آدرس-mac-و-نسخه-امنیتی-dce><i class="fas fa-link"></i></a></h3><p>این نسخه به صورت خاص در استاندارد RFC 4122 تعریف نشده است و عمومیت ندارد. مشابه نسخه 1 است با این تفاوت که 4 بایت ابتدایی از timestamp با POSIX UID کاربر و بایت پر ‌ارزش توالی ساعت با POSIX UID دامنه جایگزین شده است.</p><h3 id=نسخه-سه--md5-hash-و-namespace>نسخه سه – MD5 hash و Namespace<a class="anchor ms-1" href=#نسخه-سه--md5-hash-و-namespace><i class="fas fa-link"></i></a></h3><p>در این نسخه برای تولید UUID از Hash نمودن نام و شناسه Namespace توسط الگوریتم MD5 استفاده می‌شود. شناسه فضای نام می‌بایست خود منحصر به فرد باشد. مانند آدرس‌ها، نام‌های دامنه، شناسه موجودیت‌ها و نام‌های متمایز X.500 می‌توانند به عنوان فضای نام انتخاب شوند.</p><h3 id=نسخه-چهار--تصادفی>نسخه چهار – تصادفی<a class="anchor ms-1" href=#نسخه-چهار--تصادفی><i class="fas fa-link"></i></a></h3><p>در این نسخه از اعداد تصادفی برای تولید UUID استفاده می‌شود. از 128 بیت، 6 بیت برای نوع و نسخه UUID رزرو شده و مابقی 122 بیت به صورت تصادفی مقدار می‌گیرند که 2 به توان 122 احتمال را شامل می‌شود. از روش های متفاوتی برای تولید اعداد تصادفی در این نسخه استفاده می‌شود و استاندارد مشخصی در این زمینه وجود ندارد.</p><h3 id=نسخه-پنج---sha-1-hash-و-namespace>نسخه پنج - SHA-1 hash و Namespace<a class="anchor ms-1" href=#نسخه-پنج---sha-1-hash-و-namespace><i class="fas fa-link"></i></a></h3><p>مشابه نسخه 3 است با این تفاوت که از الگوریتم SHA-1 به جای MD5 برای Hash نمودن استفاده می‌شود.</p><h3 id=uuid-خالی-یا-nil-uuid>UUID خالی یا Nil UUID<a class="anchor ms-1" href=#uuid-خالی-یا-nil-uuid><i class="fas fa-link"></i></a></h3><p>برای UUID یک مقدار خالی یا تهی در نظر گرفته شده است که مقدار آن 00000000-0000-0000-0000-000000000000 می‌باشد.</p><h2 id=صحت-یکتایی-uuid>صحت یکتایی UUID<a class="anchor ms-1" href=#صحت-یکتایی-uuid><i class="fas fa-link"></i></a></h2><p>برخورد (Collisions) هنگامی رخ می‌دهد که یک UUID بیش از یک بار ایجاد شده و به مراجع مختلف اختصاص داده شود. در مورد UUIDهای نسخه 1 و نسخه 2 که با استفاده از آدرس‌های MAC کارت‌های شبکه که منحصر به فرد هستند ساخته شده‌اند، فقط زمانی که پیاده‌سازی استانداردها متفاوت باشد یا ایراداتی در آن وجود داشته باشد احتمال برخورد وجود دارد.</p><p>برخلاف نسخه 1 و نسخه 2 UUID که از آدرس‌های MAC منحصر به فرد کارت‌های شبکه استفاده می‌کنند، در نسخه 1 و 2 UUID تصادفی و نسخه 3 و 5 که مبتنی بر Hash هستند و نسخه 4 UUID تصادفی، احتمال برخورد وجود دارد. البته با احتمال بسیار کمی که به طور معمول قابل چشم پوشی است. این احتمال را می‌توان دقیقا بر اساس تجزیه و تحلیل پارادوکس تولد محاسبه کرد.</p><p>به عنوان مثال، تعداد UUIDهای نسخه 4 تصادفی که باید ایجاد شوند تا به احتمال 50٪ حداقل یک برخورد باید تولید شود برابر 2.71 کوئین تیلیون است. این عدد معادل تولید 1 میلیارد UUID در ثانیه برای حدود 85 سال است. فایلی که حاوی این تعداد UUID باشد، با 16 بایت در هر UUID، تقریباً 45 اگزا بایت خواهد بود. احتمال یافتن نسخه تکراری در نسخه 103 تریلیون نسخه 4 UUID یک در میلیارد است.</p><h2 id=uuid-در-csharp>UUID در CSharp<a class="anchor ms-1" href=#uuid-در-csharp><i class="fas fa-link"></i></a></h2><p>برای ایجاد و استفاده از UUID در زبان برنامه‌نویسی CSharp از ساختار Guid موجود در کتابخانه System استفاده می‌شود:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=ln>1</span><span class=cl><span class=k>public</span> <span class=k>static</span> <span class=n>Guid</span> <span class=n>NewGuid</span><span class=p>()</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=k>return</span> <span class=n>Guid</span><span class=p>.</span><span class=n>NewGuid</span><span class=p>();</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>guid ایجاد شده در این روش از نوع و نسخه چهارم UUID است و به صورت تصادفی تولید می‌شود. برای تولید guid به صورت ترتیبی می‌توان از کد زیر استفاده نمود:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=ln> 1</span><span class=cl><span class=k>public</span> <span class=k>static</span> <span class=n>Guid</span> <span class=n>NewSequentialGuid</span><span class=p>()</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=kt>var</span> <span class=n>uid</span> <span class=p>=</span> <span class=n>Guid</span><span class=p>.</span><span class=n>NewGuid</span><span class=p>().</span><span class=n>ToByteArray</span><span class=p>();</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=kt>var</span> <span class=n>binDate</span> <span class=p>=</span> <span class=n>BitConverter</span><span class=p>.</span><span class=n>GetBytes</span><span class=p>(</span><span class=n>DateTime</span><span class=p>.</span><span class=n>UtcNow</span><span class=p>.</span><span class=n>Ticks</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=kt>var</span> <span class=n>secuentialGuid</span> <span class=p>=</span> <span class=k>new</span> <span class=kt>byte</span><span class=p>[</span><span class=n>uid</span><span class=p>.</span><span class=n>Length</span><span class=p>];</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>0</span><span class=p>]</span> <span class=p>=</span> <span class=n>uid</span><span class=p>[</span><span class=m>0</span><span class=p>];</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>1</span><span class=p>]</span> <span class=p>=</span> <span class=n>uid</span><span class=p>[</span><span class=m>1</span><span class=p>];</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>2</span><span class=p>]</span> <span class=p>=</span> <span class=n>uid</span><span class=p>[</span><span class=m>2</span><span class=p>];</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>3</span><span class=p>]</span> <span class=p>=</span> <span class=n>uid</span><span class=p>[</span><span class=m>3</span><span class=p>];</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>4</span><span class=p>]</span> <span class=p>=</span> <span class=n>uid</span><span class=p>[</span><span class=m>4</span><span class=p>];</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>5</span><span class=p>]</span> <span class=p>=</span> <span class=n>uid</span><span class=p>[</span><span class=m>5</span><span class=p>];</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>6</span><span class=p>]</span> <span class=p>=</span> <span class=n>uid</span><span class=p>[</span><span class=m>6</span><span class=p>];</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=c1>// set the first part of the 8th byte to &#39;1100&#39; so     </span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=c1>// later we&#39;ll be able to validate it was generated by us   </span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>7</span><span class=p>]</span> <span class=p>=</span> <span class=p>(</span><span class=kt>byte</span><span class=p>)(</span><span class=m>0xc0</span> <span class=p>|</span> <span class=p>(</span><span class=m>0xf</span> <span class=p>&amp;</span> <span class=n>uid</span><span class=p>[</span><span class=m>7</span><span class=p>]));</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=c1>// the last 8 bytes are sequential,    </span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=c1>// it minimizes index fragmentation   </span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=c1>// to a degree as long as there are not a large    </span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    <span class=c1>// number of Secuential-Guids generated per millisecond  </span>
</span></span><span class=line><span class=ln>25</span><span class=cl>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>9</span><span class=p>]</span> <span class=p>=</span> <span class=n>binDate</span><span class=p>[</span><span class=m>0</span><span class=p>];</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>8</span><span class=p>]</span> <span class=p>=</span> <span class=n>binDate</span><span class=p>[</span><span class=m>1</span><span class=p>];</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>15</span><span class=p>]</span> <span class=p>=</span> <span class=n>binDate</span><span class=p>[</span><span class=m>2</span><span class=p>];</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>14</span><span class=p>]</span> <span class=p>=</span> <span class=n>binDate</span><span class=p>[</span><span class=m>3</span><span class=p>];</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>13</span><span class=p>]</span> <span class=p>=</span> <span class=n>binDate</span><span class=p>[</span><span class=m>4</span><span class=p>];</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>12</span><span class=p>]</span> <span class=p>=</span> <span class=n>binDate</span><span class=p>[</span><span class=m>5</span><span class=p>];</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>11</span><span class=p>]</span> <span class=p>=</span> <span class=n>binDate</span><span class=p>[</span><span class=m>6</span><span class=p>];</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>    <span class=n>secuentialGuid</span><span class=p>[</span><span class=m>10</span><span class=p>]</span> <span class=p>=</span> <span class=n>binDate</span><span class=p>[</span><span class=m>7</span><span class=p>];</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=n>Guid</span><span class=p>(</span><span class=n>secuentialGuid</span><span class=p>);</span>
</span></span><span class=line><span class=ln>36</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>برای بررسی رشته‌ای که حاوی guid است به ساختار guid می‌توان از کد زیر استفاده نمود:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=ln>1</span><span class=cl><span class=k>public</span> <span class=k>static</span> <span class=kt>bool</span> <span class=n>IsGuid</span><span class=p>(</span><span class=kt>string</span> <span class=n>guidString</span><span class=p>)</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=k>return</span> <span class=n>Guid</span><span class=p>.</span><span class=n>TryParse</span><span class=p>(</span><span class=n>guidString</span><span class=p>,</span> <span class=k>out</span> <span class=n>_</span><span class=p>);</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>برای بررسی اینکه آیا مقدار guid مورد نظرتان یک guid خالی است یا خیر می‌توان از کد زیر استفاده نمود:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=ln>1</span><span class=cl><span class=k>public</span> <span class=k>static</span> <span class=kt>bool</span> <span class=n>IsEmptyGuid</span><span class=p>(</span><span class=n>Guid</span> <span class=n>guid</span><span class=p>)</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>    <span class=k>return</span> <span class=n>guid</span> <span class=p>==</span> <span class=n>Guid</span><span class=p>.</span><span class=n>Empty</span><span class=p>;</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div></div></div></article><section class="related-posts row card component"><div class=card-header><h2 class=card-title>نوشته‌های مرتبط</h2></div><div class=card-body><ul class=post-list><li><a href=/posts/sql-server-clr/>استفاده از CLR در SQL Server</a>
<span class="float-start post-date">فوریهٔ 7, 2020</span></li><li><a href=/posts/ip-helper/>کار با آدرس های IP در CSharp</a>
<span class="float-start post-date">ژانویهٔ 3, 2020</span></li></ul></div></section></div></div><aside class="col-lg-3 sidebar d-flex"><div class="container d-flex flex-column"><div class="card row text-center profile component"><div class=card-body><div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt="آرمان حسن پور" src=/images/profile.webp loading=lazy data-viewer-invisible width=120 height=120></div><div class="col-12 profile-meta"><div class=profile-name>آرمان حسن پور</div><div class=profile-bio>برنامه نویس فول استک</div><div class=profile-about><i class="fas fa-fw fa-user"></i><a href=/about/>در مورد من</a></div><div class=profile-contact><i class="fas fa-fw fa-question-circle"></i><a href=/contact/>تماس با من</a></div><nav class="social-links nav justify-content-center"><a class="nav-link social-link" href=mailto:arman.hassanpoor2000@gmail.com title=Email><i class="fas fa-fw fa-2x fa-envelope"></i>
</a><a class="nav-link social-link" target=_blank href=https://github.com/arman-arian title=GitHub rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-github"></i>
</a><a class="nav-link social-link" target=_blank href=https://linkedin.com/in/arsin title=LinkedIn rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-linkedin-in"></i>
</a><a class="nav-link social-link" target=_blank href=https://twitter.com/arman_hasanpour title=Twitter rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-twitter"></i>
</a><a class="nav-link social-link" target=_blank href=/index.xml title=RSS rel="noopener noreferrer"><i class="fas fa-fw fa-2x fa-rss"></i></a></nav></div></div></div><section class="recent-posts row card component"><div class=card-header><h2 class=card-title>نوشته‌های اخیر</h2></div><div class=card-body><ul class=post-list><li><a href=/posts/shetab-info/>سامانه شتاب</a></li><li><a href=/posts/sql-server-clr/>استفاده از CLR در SQL Server</a></li><li><a href=/posts/uuid-guid/>کار با UUID در CSharp</a></li><li><a href=/posts/ip-helper/>کار با آدرس های IP در CSharp</a></li></ul></div></section><section class="categories-taxonomies row card component"><div class=card-header><h2 class=card-title><a href=/categories>دسته‌بندی‌ها</a></h2></div><div class=card-body><div class=py-2><a href=/categories/csharp/ class="badge rounded post-taxonomy" title=CSharp>CSharp</a><a href=/categories/dotnet/ class="badge rounded post-taxonomy" title=DotNet>
DotNet</a><a href=/categories/sqlserver/ class="badge rounded post-taxonomy" title=SQLServer>
SQLServer</a><a href=/categories/%D8%B4%D8%AA%D8%A7%D8%A8/ class="badge rounded post-taxonomy" title=شتاب>
شتاب</a></div></div></section><section class="tags-taxonomies row card component"><div class=card-header><h2 class=card-title><a href=/tags>برچسب‌ها</a></h2></div><div class=card-body><div class=py-2><a href=/tags/csharp/ class="badge rounded post-taxonomy" title=CSharp>CSharp</a><a href=/tags/dotnet/ class="badge rounded post-taxonomy" title=DotNet>
DotNet</a><a href=/tags/clr/ class="badge rounded post-taxonomy" title=CLR>
CLR</a><a href=/tags/clr-embedded/ class="badge rounded post-taxonomy" title="CLR Embedded">
CLR Embedded</a><a href=/tags/clr-integrated/ class="badge rounded post-taxonomy" title="CLR Integrated">
CLR Integrated</a><a href=/tags/guid/ class="badge rounded post-taxonomy" title=GUID>
GUID</a><a href=/tags/ip/ class="badge rounded post-taxonomy" title=IP>
IP</a><a href=/tags/iphelper/ class="badge rounded post-taxonomy" title=IPHelper>
IPHelper</a><a href=/tags/shetab/ class="badge rounded post-taxonomy" title=Shetab>
Shetab</a><a href=/tags/sql-clr/ class="badge rounded post-taxonomy" title="SQL CLR">
SQL CLR</a><a href=/tags class="badge rounded post-taxonomy" title=ALL>
ALL
<span class="badge badge-sm custom-badge text-white bg-accent me-1">13</span></a></div></div></section></div></aside></div></main><footer class="footer mt-auto py-3 text-center container"><div class="copyright mb-2">تمام حقوق این سایت متعلق به آرمان حسن پور می باشد و کپی با ذکر منبع بلامانع است.</div><div class="powered-by mb-2">با افتخار نیرو گرفته از <a href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a>.</div></footer><script src=/assets/main/bundle.min.ab5742ac652390b03f33045acd22f7fabd44e24a1b8194095942287c9b8d9e81.js integrity="sha256-q1dCrGUjkLA/MwRazSL3+r1E4kobgZQJWUIofJuNnoE=" crossorigin=anonymous defer></script><script src=/assets/icons/bundle.min.17849018f3f3b1b6bcb22df1fb426d0b6c496d4434266dd0b28bd13b9d6b63aa.js integrity="sha256-F4SQGPPzsba8si3x+0JtC2xJbUQ0Jm3QsovRO51rY6o=" crossorigin=anonymous defer></script>
<script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.min.js").then(function(e){console.log("Successfully registered service worker",e)}).catch(function(e){console.warn("Error whilst registering service worker",e)})})</script><script src=/assets/viewer/bundle.min.5ad926b46749e67285f66e2fdbc2d7cfb2689e8d9f2fcc2f59c3f51d2a1c4506.js integrity="sha256-WtkmtGdJ5nKF9m4v28LXz7Jono2fL8wvWcP1HSocRQY=" crossorigin=anonymous defer></script></body></html>