+++
author = "آرمان حسن پور"
title = "کار با UUID در CSharp" 
date = 2020-02-06T11:20:50+03:30
featured = false
comment = false
toc = false
reward = false
pinned = false
categories = [
	"DotNet", "CSharp"
]
tags = [
    "UUID", "GUID", "CSharp", "DotNet"
]
series = []
images = []
+++

برای ایجاد و استفاده از UUID در زبان برنامه‌نویسی CSharp از ساختار Guid موجود در کتابخانه System استفاده می‌شود.
<!--more-->
برای ایجاد که یک Guid در زبان برنامه‌نویسی CSharp می توان از کد زیر استفاده نمود:
```csharp
public static Guid NewGuid()
{
    return Guid.NewGuid();
}
```

guid ایجاد شده در این روش از نوع و نسخه چهارم UUID است و به صورت تصادفی تولید می‌شود. برای تولید guid به صورت ترتیبی می‌توان از کد زیر استفاده نمود:
```csharp
public static Guid NewSequentialGuid()
{
    var uid = Guid.NewGuid().ToByteArray();
    var binDate = BitConverter.GetBytes(DateTime.UtcNow.Ticks);

    var secuentialGuid = new byte[uid.Length];

    secuentialGuid[0] = uid[0];
    secuentialGuid[1] = uid[1];
    secuentialGuid[2] = uid[2];
    secuentialGuid[3] = uid[3];
    secuentialGuid[4] = uid[4];
    secuentialGuid[5] = uid[5];
    secuentialGuid[6] = uid[6];

    // set the first part of the 8th byte to '1100' so     
    // later we'll be able to validate it was generated by us   

    secuentialGuid[7] = (byte)(0xc0 | (0xf & uid[7]));

    // the last 8 bytes are sequential,    
    // it minimizes index fragmentation   
    // to a degree as long as there are not a large    
    // number of Secuential-Guids generated per millisecond  

    secuentialGuid[9] = binDate[0];
    secuentialGuid[8] = binDate[1];
    secuentialGuid[15] = binDate[2];
    secuentialGuid[14] = binDate[3];
    secuentialGuid[13] = binDate[4];
    secuentialGuid[12] = binDate[5];
    secuentialGuid[11] = binDate[6];
    secuentialGuid[10] = binDate[7];

    return new Guid(secuentialGuid);
}
```

برای بررسی رشته‌ای که حاوی guid است به ساختار guid می‌توان از کد زیر استفاده نمود:
```csharp
public static bool IsGuid(string guidString)
{
    return Guid.TryParse(guidString, out _);
}
```

برای بررسی اینکه آیا مقدار guid مورد نظرتان یک guid خالی است یا خیر می‌توان از کد زیر استفاده نمود:
```csharp
public static bool IsEmptyGuid(Guid guid)
{
    return guid == Guid.Empty;
}
```